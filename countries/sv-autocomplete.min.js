(()=>{function e(n,o,r,i){function l(t){for(var e=t+"=",i=r.cookie.split(";"),s=0;s<i.length;s++){for(var a=i[s];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null}var t=o.__rekai.predictUrl||"https://predict.rek.ai/predict";try{"1"==l("localpredict")&&(t="http://localhost:3000/predict")}catch(t){}function s(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var a="rekAutoComplete",h={cssClasses:{resultList:"sv-autocomplete-search-result",resultItem:"sv-autocomplete-result-item",activeResultItem:"sv-autocomplete-result-item-active"},appendTo:"body",queryParameterName:"term",delay:200,cacheTTL:3e5,source:t,minLength:2,params:{},sendToTarget:!1,userootpath:!1,rootpathlevel:1,rootpathprefix:""},c=38,u=40,d=13,p=27,m=9,f=!1;function e(t,e){this.element=t,this.$element=n(t),this.options=n.extend({},h,e),this._defaults=h,this._name=a,this.init()}o.escapeHTML=s,e.prototype={init:function(){n.fn.off?this.$element.off():this.$element.unbind(),this.$element.attr("autocomplete","off"),this.$element.on({keydown:n.proxy(this.handleKeydown,this),keyup:n.proxy(this.handleKeyup,this),keypress:n.proxy(this.handleKeypress,this),mousedown:n.proxy(this.handleMousedown,this),blur:n.proxy(this.handleBlur,this)}),this.addedFAQHeader=!1,this.$menu=n("<ul/>").addClass("rek-sv-autocomplete").addClass(this.getCssClass("resultList")).appendTo(this.options.appendTo).hide();var e=this;this.$menu.on("click","li",function(){var t=Array.prototype.slice.call(arguments,0);t.splice(0,0,this),e.handleItemClicked.apply(e,t)}).on("mousedown",n.proxy(function(){this.cancelBlur=!0,o.setTimeout(n.proxy(function(){delete this.cancelBlur},this),10)},this)),this.cache={}},getCssClass:function(t){return this.options.cssClasses[t]},handleKeydown:function(t){var e=t.which;e!==c||t.shiftKey?e!==u||t.shiftKey?e===d||e===m?this.selectActive():e===p?this.close():this.search():(t.preventDefault(),this.next()):(t.preventDefault(),this.previous())},handleKeyup:function(t){try{var e=$svjq("#"+t.currentTarget.id).val();o.__rekai.searchInputValue=e}catch(t){}},handleKeypress:function(t){if(!t.shiftKey)switch(t.which){case c:t.preventDefault(),this.previous();break;case u:t.preventDefault(),this.next()}},handleBlur:function(){this.cancelBlur?delete this.cancelBlur:(o.clearTimeout(this.searchTimeout),this.close())},previous:function(){void 0===this.activeItem||0===this.activeItem?this.activeItem=this.$menu.find("li").length-1:this.activeItem=this.activeItem-1,this.activateItem(this.activeItem)},next:function(){var t=this.$menu.find("li");void 0===this.activeItem||this.activeItem===t.length-1?this.activeItem=0:this.activeItem=this.activeItem+1,this.activateItem(this.activeItem)},activateItem:function(t){var e=this.getCssClass("activeResultItem"),i=this.$menu.find("li"),t=i.eq(t);i.removeClass(e),t.addClass(e),this.$element.val(t.text())},selectActive:function(){var t=this.$menu.find("."+this.getCssClass("activeResultItem"));t.length&&this.$element.val(t.text())},handleItemClicked:function(t,e){var i={href:""};try{e.hasOwnProperty("target")&&void 0!==(s=e.target.outerText||"")&&(i.href=s)}catch(t){i.href=""}o.__rekai.sendingAnEvent(null,i,"sv-auto-click"),e.preventDefault();var s=n(t);-1<t.classList.toString().indexOf("sv-autocomplete-result-item-faq")?""!=(i=(t.dataset||{}).rekEntityid||"")&&(e=$svjq("ul.rek-sv-autocomplete").find(".faq-body[data-rek-entityid='"+i+"']"),s.find(".faq-page").toggleClass("active"),s.find(".faq-body").toggleClass("faq-hidden"),e.is(":hidden")||(i=t.dataset.rekEntityid,-1==o.__rekai.allClickedFAQs.indexOf(i)&&(o.__rekai.allClickedFAQs.push(i),o.__rekai.entitytype="rekai-faq",o.__rekai.entityid=i,o.__rekai.sendView()))):this.options.sendToTarget?o.open(t.dataset.targeturl,"_self"):(this.activateItem(s.index()),this.$element.val(n(t).text()),this.$element.closest("form").submit())},close:function(){this.xhr&&this.xhr.abort(),this.$menu.hide(),this.activeItem=i},search:function(){var a={};this.searchTimeout&&o.clearTimeout(this.searchTimeout),this.searchTimeout=o.setTimeout(n.proxy(function(){var e=this.$element.val(),t=this.cache[e];if(!e||e.length<this.options.minLength)this.close();else if(t&&t.timestamp>(new Date).getTime()-this.options.cacheTTL)this.handleResult(t.value);else{var t=__rekai.getParametersFromContainer(this.options.params),i=__rekai.buildSendObject(__rekai.customer,{},!0,{isLink:!1},[]),s=this.options.source;try{"1"==l("localpredict")&&(s="http://localhost:3000/predict")}catch(t){}if(s+=__rekai.getPredictionURLParameters(t,i,__rekai.customer),this.options.userootpath){t={userootpath:!0,rootpathlevel:this.options.rootpathlevel,rootpathprefix:this.options.rootpathprefix};try{s+="&subtree="+o.__rekai.rootPathSettings(t)}catch(t){}}s=s+"&rt=flat"+"&keywords=true",o.__rekai.customAutocompleteTransform&&(s=o.__rekai.customAutocompleteTransform(s)),a[this.options.queryParameterName]=this.$element.val(),this.xhr=n.ajax({url:s,dataType:"json",data:a}).done(n.proxy(this.handleResult,this)).done(n.proxy(function(t){t&&(this.cache[e]={value:t,timestamp:(new Date).getTime()})},this)).fail(n.proxy(function(){this.$menu.hide()},this))}},this),this.options.delay)},handleResult:function(t){if(t){try{o.sortResult&&(t=o.sortResult(t))}catch(t){console.log("Error in custom sort e:"+t)}this.activeItem=i,f||(f=!0,o.__rekai.sendingAnEvent(null,null,"sv-auto-show"));var e=o.rekaiSVAutoRenderItem||this.renderItem,t=n.map(t,n.proxy(e,this));this.$menu.html(t.join("")).show().position({my:"left top",at:"left bottom",of:this.$element})}},renderItem:function(t){var e,i=t.title;try{if(this.options.sendToTarget&&""==t.pageid)return""}catch(t){return""}return t.isrekaifaq||!1?this.getFaqHTMLOneQuestion(t):-1<(t=t.url).indexOf("http")?(e="'"+t+"'",'<li class="'+this.getCssClass("resultItem")+' externalAutoClass"><a href="#" onclick="window.open('+e+", '_blank');\">"+s(i)+'<img alt="" src="/sitevision/util/images/externallink.png" class="sv-linkicon" styel="max-height: 10px;max-width: 10px;"></a></li>'):'<li class="'+this.getCssClass("resultItem")+'" data-targeturl="'+t+'" ><a href="#">'+s(i)+"</a></li>"},getFaqHTMLOneQuestion:function(t){var e="",i=t.question,s=t.answer,a=t.idNbr,t=t.path,n="";return this.addedFAQHeader||(this.addedFAQHeader=!0,n="sv-autocomplete-result-item-faq-first"),(e+='<li class="sv-autocomplete-result-item sv-autocomplete-result-item-faq '+n+'" data-rek-entityid="'+a+'">')+'<div class="one-faq-wrapper">'+('<a class="faq-page trigger-rek-entitytype-faq-view" data-rek-entityid="'+a+'" href="#">')+i+"</a>"+('<div class="faq-body faq-hidden" data-rek-entityid="'+a+'">')+'<p class="one-faq-answer">'+s+"</p>"+('<a href="'+t+'" title="" class="faq-more-info" onMouseDown=\'window.location.href=this.getAttribute("href")\'">Mer information</a>')+"</div>"+"</div>"+"</li>"}},n.fn[a]=function(t){return this.each(function(){n.data(this,"plugin_"+a)||n.data(this,"plugin_"+a,new e(this,t))})}}function i(t){"undefined"!=typeof $svjq&&$svjq.fn&&$svjq(t).each(function(){$svjq(this).rekAutoComplete()})}function s(t){this.ctx=t}window.__rekai=window.__rekai||[],window.__rekai.initSvAutocompleteQueue=[],"undefined"!=typeof $svjq?e($svjq,window,document):(s.prototype={ctx:"",rekAutoComplete:function(){window.__rekai.initSvAutocompleteQueue.push(this.ctx)},unbind:function(){}},window.$svjq=function(t){return new s(t)},svDocReady(function(){if(e($svjq,window,document),window.__rekai.initSvAutocompleteQueue){for(var t=0;t<window.__rekai.initSvAutocompleteQueue.length;t++)i(window.__rekai.initSvAutocompleteQueue[t]);window.__rekai.initSvAutocompleteQueue=[]}}));try{var t=window.__rekai.appdata||{};t.hasOwnProperty("initSvAutoComplete")&&t.initSvAutoComplete&&svDocReady(function(){i(".sv-searchform-portlet input[name='query']")})}catch(t){}})();