(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53743],{753743:function(e,t,r){"use strict";r.r(t),r.d(t,{Telemetry:function(){return Telemetry},WindowUndefinedError:function(){return WindowUndefinedError},createScriptTags:function(){return createScriptTags},injectScriptElement:function(){return injectScriptElement},injectScriptElementAsync:function(){return injectScriptElementAsync},storage:function(){return a}});var i=r(811093),n=r.n(i),s=r(7736),o=r.n(s);let a={storage:{},memory:!0,get(e){let t;try{t=window.localStorage&&window.localStorage.getItem(e)||this.storage[e]}catch(r){t=this.storage[e]}if(t)try{return JSON.parse(t)}catch(e){return}},set(e,t){let r=JSON.stringify(t);try{window.localStorage.setItem(e,r)}catch(r){this.memory||(console.error("setting local storage failed, falling back to in-memory storage"),this.memory=!0),this.storage[e]=t}},delete(e){try{window.localStorage.removeItem(e)}catch(t){this.memory||(console.error("setting local storage failed, falling back to in-memory storage"),this.memory=!0),delete this.storage[e]}}},l="esri-telemetry";function injectScriptElementAsync(e){let t=new Promise((t,r)=>{e.onload=t,e.onerror=r;let i=injectScriptElement(e);(!i||e.body)&&t()});return t}function injectScriptElement(e){let{body:t,src:r,id:i,dataAttribute:n,section:s="body",type:o="text/javascript",async:a=!1,defer:c=!1,onload:u,onerror:d}=e;if("undefined"==typeof window)throw new WindowUndefinedError("Window is undefined: Cannot add script element.");if(function(e){let{id:t,dataAttribute:r}=e;return!!document.getElementById(t)||!!document.querySelector(`[data-${l}="${r}"]`)}(e)){console.log(`script (${i||n}) is already present, skipping`);return}let f=function({id:e,dataAttribute:t,type:r,async:i,defer:n,body:s,src:o,onload:a,onerror:c}){let u=document.createElement("script");return e&&(u.id=e),t&&u.setAttribute(`data-${l}`,t),o&&(u.src=o),s&&(u.innerText=s),u.type=r,u.async=i,u.defer=n,a&&(u.onload=a),c&&(u.onerror=c),u}({id:i,dataAttribute:n,type:o,async:a,defer:c,body:t,src:r,onload:u,onerror:d});return"body"===s?document.body.appendChild(f):document.head.appendChild(f)}let WindowUndefinedError=class WindowUndefinedError extends Error{};function createScriptTags(e){return e.map(e=>{let t=[];return["src","id","dataAttribute","type"].forEach(r=>{let i=r;"dataAttribute"===r&&(i="data-esri-telemetry"),e[r]&&t.push(`${i}="${e[r]}"`)}),["async","defer"].forEach(r=>{e[r]&&t.push(`${r}`)}),`<script ${t.join(" ")}>${e.body?e.body:""}</script>`}).join("")}let c=["esri.com","esriuk.com","esri.de","esri.ca","esrifrance.fr","esri.nl","esri-portugal.pt","esribulgaria.com","esri.fi","esri.kr","esrimalaysia.com.my","esri.es","esriaustralia.com.au","esri-southafrica.com","esri.cl","esrichina.com.cn","esri.co","esriturkey.com.tr","geodata.no","esriitalia.it","esri.pl"];let Telemetry=class Telemetry{constructor(e){var t,r,i;this.trackers=[],this.options=e,this.debug=e.debug,this.suppressDisabledWarnings=e.suppressDisabledWarnings,this.disabled=function(e={}){let{disabled:t,portal:r}=e;return!!t||(null==r?void 0:r.eueiEnabled)===!1||!(!r||r.eueiEnabled&&r.user&&r.user.orgId===r.id||r.user&&!r.user.orgId&&"US"===r.ipCntryCode||!r.user&&"US"===r.ipCntryCode)}(e),this.logger=e.logger||console,this.disabled&&!this.suppressDisabledWarnings&&this.logger.info("Telemetry Disabled");let n=(null===(t=e.portal)||void 0===t?void 0:t.user)||e.user;n&&this.setUser(n,null===(i=null===(r=e.portal)||void 0===r?void 0:r.subscriptionInfo)||void 0===i?void 0:i.type),this.disabled||this.initializeTrackers()}initializeTrackers(){this.options.plugins&&this.trackers.push(...this.options.plugins),this.trackers.length||this.logger.error(Error("No trackers configured"))}getScriptTags(){return this.trackers.map(e=>e.getScriptTags&&e.getScriptTags()).join("")}async init(){let e=this.trackers.map(e=>e.init());await Promise.all(e)}setUser(e={},t="Public"){let r;if(e="string"==typeof e?{username:e}:e,this.user=e,this.user.accountType=t,e.email&&e.email.split){let t=e.email.split("@")[1];r=c.filter(e=>t===e).length>0}(r||["In House","Demo and Marketing"].indexOf(t)>-1)&&(this.user.internalUser=!0)}logPageView(e,t={},r={}){if(this.disabled&&!this.suppressDisabledWarnings)return this.logger.info("Page view was not logged because telemetry is disabled."),!1;let i=this.trackers.filter(({disabled:e,hasError:t})=>!e&&!t);if(!i.length)return this.logger.warn("Page view was not logged because no enabled telemetry-plugins are registered."),!1;let n=this.preProcess(t,r);this.debug&&this.logger.info("Tracking page view",JSON.stringify(n));let s=i.map(t=>t.logPageView(e,n));return Promise.all(s).then(),!0}logEvent(e,t={}){if(this.disabled&&!this.suppressDisabledWarnings)return this.logger.info("Event was not logged because telemetry is disabled."),!1;let r=this.trackers.filter(({disabled:e,hasError:t})=>!e&&!t);if(!r.length)return this.logger.warn("Event was not logged because no enabled telemetry-plugins are registered."),!1;let i=this.preProcess(e,t);this.debug&&this.logger.info("Tracking event",JSON.stringify(i));let n=r.map(e=>e.logEvent(i));return Promise.all(n).then(),!0}logError(e={}){e=Object.assign({eventType:"error"},e),this.logEvent(e)}startWorkflow(e,t={}){let r={name:e,start:Date.now(),steps:[],workflowId:Math.floor((1+Math.random())*17592186044416).toString(16)};this.saveWorkflow(r);let i=Object.assign({name:e,step:"start"},t);return this.logWorkflow(i),r}stepWorkflow(e,t,r={}){let i="string"==typeof r?r:r.details,n=Object.assign({name:e,step:t,details:i},r);this.logWorkflow(n)}endWorkflow(e,t={}){let r=Object.assign({name:e,step:"finish"},t);this.logWorkflow(r)}cancelWorkflow(e,t={}){let r=Object.assign({name:e,step:"cancel"},t);this.logWorkflow(r)}getWorkflow(e){let t=a.get(`TELEMETRY-WORKFLOW:${e}`);if(t){let e=Date.now()-t.start;if(e<18e5)return t;this.deleteWorkflow(t)}}saveWorkflow(e){a.set(`TELEMETRY-WORKFLOW:${e.name}`,e)}deleteWorkflow(e){a.delete(`TELEMETRY-WORKFLOW:${e.name}`)}logWorkflow(e={}){e=this.preProcess(e);let t=this.getWorkflow(e.name);t||(this.startWorkflow(e.name),t=this.getWorkflow(e.name)),t.steps.push(e.step),t.duration=(Date.now()-t.start)/1e3,["cancel","finish"].indexOf(e.step)>-1?this.deleteWorkflow(t):this.saveWorkflow(t);let r=Object.assign(e,{eventType:"workflow",category:e.name,action:e.step,label:e.details,duration:t.duration,workflowId:t.workflowId});this.logEvent(r)}preProcess(e={},t={}){var r,i;let n={};return this.user&&(n={user:anonymize(this.user.username),org:anonymize(this.user.orgId),lastLogin:this.user.lastLogin,userSince:this.user.created,internalUser:this.user.internalUser||!1,accountType:this.user.accountType}),Object.entries(Object.assign(Object.assign({},e),n)).reduce((r=t.omitComplexData,i=this.logger,function(e,[t,n]){return["string","number","boolean","undefined"].includes(typeof n)||n&&"string"==typeof n.valueOf()?e[t]=n:r||(i.warn(`You are trying to log a non-primitive value, ${t}:${JSON.stringify(n)}. This will get logged as [object Object]`),e[t]=n),e}),{})}disableTracker(e){var t;let r=this.trackers.find(({name:t})=>t===e);r&&!r.hasError&&(r.disabled=!0,null===(t=r.disable)||void 0===t||t.call(r))}enableTracker(e){var t;let r=this.trackers.find(({name:t})=>t===e);r&&!r.hasError&&(r.disabled=!1,null===(t=r.enable)||void 0===t||t.call(r))}};function anonymize(e){if(e)return n()(e).toString(o())}},957359:function(e,t,r){var i;e.exports=i||function(e,t){if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==r.g&&r.g.crypto&&(i=r.g.crypto),!i)try{i=r(150633)}catch(e){}var i,cryptoSecureRandomInt=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},n=Object.create||function(){function F(){}return function(e){var t;return F.prototype=e,t=new F,F.prototype=null,t}}(),s={},o=s.lib={},a=o.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=o.WordArray=a.extend({init:function(e,t){e=this.words=e||[],void 0!=t?this.sigBytes=t:this.sigBytes=4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var s=0;s<n;s++){var o=r[s>>>2]>>>24-s%4*8&255;t[i+s>>>2]|=o<<24-(i+s)%4*8}else for(var a=0;a<n;a+=4)t[i+a>>>2]=r[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(cryptoSecureRandomInt());return new l.init(t,e)}}),c=s.enc={},u=c.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new l.init(r,t/2)}},d=c.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var s=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new l.init(r,t)}},f=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,i=this._data,n=i.words,s=i.sigBytes,o=this.blockSize,a=s/(4*o),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,u=e.min(4*c,s);if(c){for(var d=0;d<c;d+=o)this._doProcessBlock(n,d);r=n.splice(0,c),i.sigBytes-=u}return new l.init(r,u)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new g.HMAC.init(e,r).finalize(t)}}});var g=s.algo={};return s}(Math)},7736:function(e,t,r){e.exports=r(957359).enc.Hex},811093:function(e,t,r){var i,n,s,o,a,l,c,u,d,f;e.exports=(i=r(957359),n=Math,o=(s=i.lib).WordArray,a=s.Hasher,l=i.algo,c=[],u=[],function(){function getFractionalBits(e){return(e-(0|e))*4294967296|0}for(var e=2,t=0;t<64;)(function(e){for(var t=n.sqrt(e),r=2;r<=t;r++)if(!(e%r))return!1;return!0})(e)&&(t<8&&(c[t]=getFractionalBits(n.pow(e,.5))),u[t]=getFractionalBits(n.pow(e,1/3)),t++),e++}(),d=[],f=l.SHA256=a.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],s=r[2],o=r[3],a=r[4],l=r[5],c=r[6],f=r[7],h=0;h<64;h++){if(h<16)d[h]=0|e[t+h];else{var g=d[h-15],p=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=d[h-2],m=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;d[h]=p+d[h-7]+m+d[h-16]}var w=a&l^~a&c,b=i&n^i&s^n&s,v=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),k=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+w+u[h]+d[h],S=v+b;f=c,c=l,l=a,a=o+k|0,o=s,s=n,n=i,i=k+S|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0,r[5]=r[5]+l|0,r[6]=r[6]+c|0,r[7]=r[7]+f|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=n.floor(r/4294967296),t[(i+64>>>9<<4)+15]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f),i.SHA256)}}]);